# ОТЧЕТ ОБ ИСПРАВЛЕНИЯХ ФОРМУЛ И ДОБАВЛЕНИИ ФАЙЛА КОНСТАНТ

## Основные исправления

### ✅ **Исправлена зависимость коэффициентов от времени измерения**

**Проблема**: Коэффициенты матрицы A^l_ij не зависели от времени измерения, что приводило к одинаковым спектрам для всех групп ЗН.

**Решение**: Исправлен T-фактор в формуле:
```
БЫЛО: T_i = [M / (1 - e^(-λ_i * T)) - e^(-λ_i * T) * (1 - e^(-M * λ_i * T)) / (1 - e^(-λ_i * T))^2]
СТАЛО: T_i = e^(-λ_i * t_meas) * [M / (1 - e^(-λ_i * T)) - e^(-λ_i * T) * (1 - e^(-M * λ_i * T)) / (1 - e^(-λ_i * T))^2]
```

### ✅ **Добавлен файл констант `constants.py`**

Все физические константы и параметры эксперимента теперь читаются из отдельного файла:

- **Физические константы групп ЗН** (распространенности, периоды полураспада)
- **Параметры эксперимента** (времена облучения, измерения, циклы)
- **Численные параметры** (пороги, коэффициенты стабильности)
- **Параметры T-фактора** (выбор формулы расчета)

### ✅ **Результаты исправлений**

Теперь коэффициенты правильно затухают во времени:

| Группа | Период полураспада | Отношение коэф. | Физический смысл |
|--------|-------------------|-----------------|------------------|
| Группа 1 | 55.60 с | 3.4 | Медленное затухание |
| Группа 2 | 22.70 с | 17.5 | Среднее затухание |
| Группа 3 | 6.22 с | 95.5 | Быстрое затухание |
| Группа 4 | 2.30 с | 87.3 | Очень быстрое затухание |
| Группа 5 | 0.61 с | 60.8 | Экстремально быстрое |
| Группа 6 | 0.23 с | 32.6 | Экстремально быстрое |
| Группа 7 | 0.05 с | 8.5 | Экстремально быстрое |
| Группа 8 | 0.02 с | 3.5 | Экстремально быстрое |

### ✅ **Возможности настройки**

Теперь можно легко изменять параметры в файле `constants.py`:

```python
# Изменить время облучения
EXPERIMENT_PARAMS['irradiation_times']['long'] = 180.0  # вместо 120.0

# Изменить количество групп
EXPERIMENT_PARAMS['num_groups'] = 6

# Изменить физические константы
GROUP_CONSTANTS['half_lives'] = [60.0, 25.0, 8.0, 3.0, 1.0, 0.3]

# Включить полную формулу T-фактора
T_FACTOR_PARAMS['use_simplified_formula'] = False
```

### ✅ **Структура Excel файла**

Новый файл `final_analysis_20250815_081718.xlsx` содержит 12 листов:

1. **Длинное_облучение_парам** - спектральные параметры
2. **Короткое_облучение_парам** - спектральные параметры  
3. **Спектры_длинное_облуч** - сырые спектральные данные
4. **Неопределенности_длинное** - неопределенности
5. **Спектры_короткое_облуч** - сырые спектральные данные
6. **Неопределенности_короткое** - неопределенности
7. **Энергетические_бины** - энергетические бины
8. **Физич_константы** - физические константы групп
9. **Коэффициенты_длинное** - детальные коэффициенты A^l_ij
10. **Коэффициенты_короткое** - детальные коэффициенты A^l_ij
11. **Сводка_коэф_длинное** - матрица коэффициентов
12. **Сводка_коэф_короткое** - матрица коэффициентов

### ✅ **Физическая корректность**

Теперь система уравнений правильно отражает физику процесса:
- Группы с коротким периодом полураспада быстрее затухают
- Коэффициенты зависят от времени измерения
- Спектры разных групп имеют разную форму
- Все параметры легко настраиваются

**Статус**: ✅ Исправлено и протестировано
**Файл**: `final_analysis_20250815_081718.xlsx`
**Репозиторий**: https://github.com/Taulan23/zadacha
