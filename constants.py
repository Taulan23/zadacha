"""
Физические константы и параметры эксперимента для анализа спектров запаздывающих нейтронов
"""

# Физические константы для 8-групповой модели 235U
GROUP_CONSTANTS = {
    # Относительные распространенности групп ЗН
    'relative_abundances': [0.038, 0.213, 0.188, 0.407, 0.128, 0.069, 0.014, 0.001],
    
    # Периоды полураспада групп ЗН (в секундах)
    'half_lives': [55.6, 22.7, 6.22, 2.30, 0.610, 0.230, 0.052, 0.017]
}

# Параметры измерений для каждого интервала облучения
MEASUREMENT_INTERVALS = {
    # Длинное облучение (tirr = 120s)
    'long_irradiation': {
        'tirr': 120.0,
        'intervals': [
            {'td': 0.12, 'tc': 0.88, 't1': 0.12, 't2': 1.0},      # Интервал 1
            {'td': 1.0, 'tc': 1.0, 't1': 1.0, 't2': 2.0},         # Интервал 2
            {'td': 2.0, 'tc': 1.0, 't1': 2.0, 't2': 3.0},         # Интервал 3
            {'td': 3.0, 'tc': 1.0, 't1': 3.0, 't2': 4.0},         # Интервал 4
            {'td': 4.0, 'tc': 40.0, 't1': 4.0, 't2': 44.0},       # Интервал 5
            {'td': 0.12, 'tc': 43.88, 't1': 0.12, 't2': 44.0}     # Интервал 6
        ]
    },
    
    # Короткое облучение (tirr = 20s)
    'short_irradiation': {
        'tirr': 20.0,
        'intervals': [
            {'td': 0.12, 'tc': 1.88, 't1': 0.12, 't2': 2.0},      # Интервал 1
            {'td': 2.0, 'tc': 10.0, 't1': 2.0, 't2': 12.0},       # Интервал 2
            {'td': 12.0, 'tc': 10.0, 't1': 12.0, 't2': 22.0},     # Интервал 3
            {'td': 22.0, 'tc': 10.0, 't1': 22.0, 't2': 32.0},     # Интервал 4
            {'td': 32.0, 'tc': 120.0, 't1': 32.0, 't2': 152.0},   # Интервал 5
            {'td': 0.12, 'tc': 151.88, 't1': 0.12, 't2': 152.0}   # Интервал 6
        ]
    }
}

# Параметры эксперимента (общие)
EXPERIMENT_PARAMS = {
    # Времена облучения (в секундах) - теперь берутся из MEASUREMENT_INTERVALS
    'irradiation_times': {
        'long': MEASUREMENT_INTERVALS['long_irradiation']['tirr'],
        'short': MEASUREMENT_INTERVALS['short_irradiation']['tirr']
    },
    
    # Количество групп ЗН
    'num_groups': 8,
    
    # Количество интервалов измерения (будет определяться динамически из данных)
    'num_intervals': 6
}

# Параметры энергетических бинов
ENERGY_PARAMS = {
    # Диапазон энергий (в кэВ)
    'energy_range': (10.0, 1600.0),
    
    # Размер энергетического бина (в кэВ)
    'bin_size': 10.0,
    
    # Количество энергетических бинов
    'num_bins': 160
}

# Параметры численных расчетов
NUMERICAL_PARAMS = {
    # Коэффициент базовой чувствительности для численной стабильности
    'base_sensitivity_factor': 0.01,
    
    # Минимальный вклад каждой группы (относительно максимального)
    'min_contribution_factor': 0.001,
    
    # Порог для псевдообратной матрицы
    'pinv_rcond': 1e-10,
    
    # Порог для избежания деления на ноль
    'zero_threshold': 1e-10
}

# Параметры для расчета T-фактора
T_FACTOR_PARAMS = {
    # Использовать упрощенную формулу для T-фактора
    'use_simplified_formula': True,  # Используем упрощенную формулу для стабильности
    
    # Для упрощенной формулы: T_i = M (если M=1)
    'simplified_t_factor': 1.0
}
